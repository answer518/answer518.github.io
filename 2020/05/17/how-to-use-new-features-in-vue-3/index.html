
<!DOCTYPE html>
<html lang="">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#202020" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script
    type='text/javascript'>var TINGYUN = function (t, e, n) {
        if (/(MSIE [0-8].\d+)/.test(navigator.userAgent)) { return { TY_INFO: 'Browser Version Not Support to load TINGYUN Agent' }; } function r(t) { return JSON.parse(t) } function i(t) { return JSON.stringify(t) } function a(t) { var e = !!t && "length" in t && t.length, n = typeof t; return "function" !== n && ("array" === n || 0 === e || "number" == typeof e && e > 0 && e - 1 in t) } function o(t, e, n) { var r, i = 0; if (t) if (a(t)) for (r = t.length; i < r && e.call(t[i], t[i], i) !== !1; i++); else for (i in t) if ((n || Object.prototype.hasOwnProperty.call(t, i)) && e.call(t[i], t[i], i) === !1) break; return t } function s(t) { return function (e) { return "Array" === t && Array.isArray ? Array.isArray(e) : Object.prototype.toString.call(e) === "[object " + t + "]" } } function u(t) { return new Function("return " + t)() } function c(t) { switch (typeof t) { case "object": if (!t) return null; if (t instanceof Array) { var e = Pe.call(t); return o(e, function (t, n) { e[n] = c(t) }), "[" + e.join(",") + "]" } if (t instanceof Date) return t.getTime().toString(); var n = ""; return o(t, function (t, e) { He(t) || (n += c(e) + ":" + c(t) + ",") }), n && (n = n.substr(0, n.length - 1)), "{" + n + "}"; case "string": return Ue + t.replace(Fe, "\\$1").replace(Xe, "\\n") + Ue; case "number": return isNaN(t) ? null : t; case "boolean": return t; case "function": return c(t.toString()); case "undefined": default: return '"undefined"' } } function f(t) { return t && Ne(t) ? qe(t) : t } function l(t, e, n, r) { return t.addEventListener(e, n, r) } function d(t, e, n) { return t.removeEventListener(e, n) } function h(t, e, n) { return t.attachEvent("on" + e, n) } function v(t, e, n) { return t.detachEvent("on" + e, n) } function p(t, e, n, r) { var i = function () { return We(t, e, i), n.apply(this, arguments) }; return Ye(t, e, i, r) } function g(t, e) { return Function.prototype.apply.apply(t, e) } function m(t, e) { return function () { t.apply(e, arguments) } } function y(t) { return Je ? Je(t) : t } function _(t) { var e = arguments.length; if (e < 2 || !t) return t; var n = Pe.call(arguments, 1); return o(n, function (e) { o(e, function (e, n) { t[n] = e }) }), t } function x(t, e) { for (var n = -1, r = 0, i = null == t ? 0 : t.length, a = []; ++n < i;) { var o = t[n]; e(o, n, t) && (a[r++] = o) } return a } function b(t, e) { return t ? e ? t.replace(/\{(\w+.?\w+)\}/g, function (t, n) { return e[n] || "" }).replace(/\{(\d+)\}/g, function (t, n) { return e[n] || "" }) : t : "" } function S(t, e, n) { var r; if (null == t) return -1; var i = Object(t), a = i.length >>> 0; if (0 === a) return -1; var o = +n || 0; if (Math.abs(o) === 1 / 0 && (o = 0), o >= a) return -1; for (r = Math.max(o >= 0 ? o : a - Math.abs(o), 0); r < a;) { if (r in i && i[r] === e) return r; r++ } return -1 } function E(t, e) { var n = null == t ? 0 : t.length; if (!n) return -1; for (var r = n; r--;)if (t[r] === e) return r; return r } function w(t) { return setTimeout(t, 0) } function T() { } function k() { var t = window && window.performance; return t && t.timing && t.timing.navigationStart && t.now ? Math.round(t.timing.navigationStart + t.now()) : +new Date } function C(t) { return function () { if (null !== t) { var e = t; t = null, e.apply(this, arguments) } } } function O(t) { return t ? Ne(t) ? t.length : e.ArrayBuffer && t instanceof ArrayBuffer ? t.byteLength : e.Blob && t instanceof Blob ? t.size : t.length ? t.length : 0 : 0 } function I(t) { return Ke !== Ve && /^https/i.test(t && t.protocol || Ke) ? "https:" : Ve } function R(t, e, n, r) { var i = null; return t && e && (i = I(r) + "//" + t + e, n && (i += "?", o(n, function (t, e) { var n = [y(e), "=", y(t), "&"]; i += n.join("") }), r && r.disableUploadTime || (i += "__r=" + k()))), i } function q() { this.events = {} } function M(t) { return !(t in Xn) || Xn[t] } function N(t) { var e = Pn.cookie.match(new RegExp("(^|;\\s*)(" + t + ")=([^;]*)")); return e ? e[3] : null } function A(t, e, n, r) { var i = t + "=" + e; if (n) { var a = new Date; a.setTime(a.getTime() + 1e3 * n), i += ";expires=" + a.toGMTString() } r && (i += ";path=" + r), Pn.cookie = i } function H(t, e, n, r) { He(n) && (r = n); var i = new XDomainRequest; i.open(ir, t), i.onload = function () { r(null, i.responseText) }, i.onerror = function (t) { r(t) }, i.send(Me(e)) } function j(t, e, n) { var r = Pn.createElement(t); try { for (var i in e) r[i] = e[i] } catch (a) { var o = "<" + t; for (var i in e) o += " " + i + '="' + e[i] + '"'; o += ">", n || (o += "</" + t + ">"), r = Pn.createElement(o) } return r } function D(t, e, n, r) { He(n) && (r = n); var i = "ty_form" + k(), a = j("div", { style: rr }), o = j("iframe", { name: i, width: 0, height: 0, style: rr }), s = j("form", { style: rr, action: t, enctype: "application/x-www-form-urlencoded", method: "post", target: i }), u = j("input", { name: "data", type: "hidden" }, !0); u.value = Me(e), s.appendChild(u), a.appendChild(o), a.appendChild(s), Pn.body.appendChild(a), s.submit(), o.onload = function () { r && r(null, o.innerHTML), Pn.body.removeChild(a) } } function L(t, e, n, r) { He(n) && (r = n, n = null); var i = C(r), a = new Un; a[vn] = !0, a.overrideMimeType && a.overrideMimeType("text/html"), a.onreadystatechange = function () { 4 == a.readyState && 200 == a.status && i(null, a.responseText) }, a.onerror = i, e = Me(e); try { a.open(ir, t, !0) } catch (o) { return D(t, e, i) } for (var s in n) a.setRequestHeader(s, n[s]); e ? a.send(e) : a.send() } function B(t, e, n, r) { He(n) && (r = n, n = null); var i = $n.sendBeacon(t, Me(e)); i ? r && r() : L(t, e, n, r) } function z(t, e, n) { if (t && n && He(n)) { var r = t[e]; if (!r || !r._wrapped) { var i = n(r, e); return i && (i._wrapped = !0), t[e] = i, i } } } function P(t) { sr && t() } function U(t) { return function () { sr && t.apply(this, arguments) } } function F() { sr = !1 } function X(t, e) { pr[t] = e } function G(t) { W(t, _r) } function Y(t) { W(t, xr) } function W(t, e) { var n = "ok"; return t ? void e.push(t) : n = e.length ? e.join("\n") : n } function J(t) { try { return f(t) } catch (e) { G(e && e.message) } return null } function $(t, e, n) { return n === _n && t && t.getResponseHeader ? t.getResponseHeader(e) : n === xn && t.headers ? t.headers.get(e) : null } function K(t, e, n) { var r = J($(t, yn, n || _n)); return r && r.r && toString(r.r) === toString(e.r) ? r : null } function V(t, e) { t.s_id = e.id, t.s_name = e.action, e.time && (t.s_du = e.time.duration, t.s_qu = e.time.qu), t.t_id = e.trId } function Q(t) { var e = !1; return o(dr.xhrs, function (n) { if (n.id === t.id) return e = !0, !1 }), e } function Z() { try { o(gr, function (t) { t && t.disconnect() }) } catch (t) { } } function tt(t, e) { this.flags = 0, He(t.create) && (this.create = t.create, this.flags |= Tr), He(t.before) && (this.before = t.before, this.flags |= kr), He(t.after) && (this.after = t.after, this.flags |= Cr), He(t.error) && (this.error = t.error, this.flags |= Or), this.data = e } function et(t, e) { if (!Rr) { if (!je(t) || !t) throw new TypeError("callbacks arguments must be an object"); return Rr = new tt(t, e) } } function nt(t) { var e = Rr.data; if (0 !== (Rr.flags & Tr)) { var n = Rr.create(Rr.data); void 0 !== n && (e = n) } return function r() { 0 !== (Rr.flags & kr) && Rr.before(this, e); var n = r; n._ && (n._ = 1); try { var i = t.apply(this, arguments) } catch (a) { throw 0 !== (Rr.flags & Or) && Rr.error(e, a), a } return 0 !== (Rr.flags & Cr) && Rr.after(this, e), i } } function rt(t) { return !Rr || Rr.flags <= 0 ? t : nt(t) } function it() { function t(t) { return function (e) { var n = Pe.call(arguments, 0); He(e) && (n[0] = rt(e)); var r = this; try { return t.apply(r, n) } catch (i) { } return g(t, [r, n]) } } z(e, "setTimeout", t), z(e, "setInterval", t) } function at(t) { function e() { } return e.prototype = t, new e } function ot() { this.id = null, this.active = null, this._set = [] } function st() { it(); var t = new ot; return t.id = et({ create: function () { return t.active }, before: function (e, n) { n && t.enter(n) }, after: function (e, n) { n && t.exit(n) }, error: function (e, n) { if (e) { try { var r = "moduleId"; n[r] = e[r] } catch (i) { } t.exit(e) } } }), t } function ut() { return Mr || (qr = st(), Mr = !0), qr } function ct(t) { Nr && console.warn(t || "Event key required!") } function ft(t) { t = t || {}, this.key = t.key, this.type = t.type || qn; var e = t.timeout || 6e5; this.i = e ? setTimeout(m(this.fail, this), e) : null, this.status = 1, this.remain = 0, this.xhrs = [], this.s = k(), this.e = null, this.called = this.sent = this.stored = !1 } function lt(t) { t = t || {}; var e = t.key; if (!e) return new ct; if (jr[e]) return new ct("event " + e + " is executing"); jr[e] = !0; var n = qr.createContext(); qr.enter(n); var r = new ft(t); return qr.set("event", r), r._end = function () { var t = this; t.sent || t.stored || 0 !== t.remain || !t.called ? t.stored && this.refreshEventAndStore(n) : t.finish().send(n) }, r.end = function (t, e) { var r = this; return r.called ? void (Nr && console.warn("Event " + this.key + "has ended or failed!")) : (r.called = !0, qr.exit(n), r.status = null != t ? t : 1, void (e || r._end())) }, r.finish = function (t) { var e = this; return e.e = k(), e.i && clearTimeout(e.i), delete jr[e.key], e }, r.fail = function () { this.end(0) }, r.store = function () { this.end(null, !0), this.refreshEventAndStore(n), this.stored = !0 }, r } function dt(t) { var n = e.localStorage.getItem(On), r = J(n); if (r && r.start && (t = t || {}, !t.key || r.key === t.key)) { var i = t.timeout; if (i || (i = In), r.duration = k() - r.start, r.duration > i) return void e.localStorage.removeItem(On); if (hr.xhrs && hr.xhrs.length > 0) { r.xhrs || (r.xhrs = []); try { o(hr.xhrs, function (t) { t.start = t.start - r.start }), r.xhrs = r.xhrs.concat(hr.xhrs) } catch (a) { } pt() } var s = e.performance.timing; if (s.navigationStart && (s.loadEventEnd || s.loadEventStart) && s.navigationStart - r.start >= 0) { var u = { req: "GET " + document.URL, status: 200, type: "PF", start: s.navigationStart - r.start, du: (s.loadEventEnd || s.loadEventStart) - s.navigationStart }; ei && (u.s_id = ei.id, u.s_name = ei.n, u.s_du = ei.a, u.s_qu = ei.q, u.t_id = ei.tid), r.xhrs || (r.xhrs = []), r.xhrs.push(u) } var c = 1; t.status && (c = t.status === Nn ? 1 : 0), r.status = c, e.localStorage.removeItem(On), oi.emit("send", "/spe", null, r, T) } } function ht(t) { w(function () { dt(t) }) } function vt() { var t = e.localStorage.getItem(On); t && (hr.recording = !0) } function pt() { hr.recording = !1, hr.xhrs = [] } function gt(t) { t = _(t || {}, { type: Rn }); var e = lt(t); return t.autoEnd && setTimeout(function () { t.status && t.status === An ? e.fail() : e.end() }, t.endDelay || Mn), e } function mt() { return oi[zr] || oi._end } function yt() { return oi.loadEventEnd || oi._end } function _t(t) { function e(e) { return t[e] > 0 ? t[e] - i : 0 } var r = {}, i = n; if (t) { P(function () { var e = ur.t = {}; o(t, function (t, n) { He(t) || (e[n] = t) }, !0) }), i = t.navigationStart, r = { f: e(Jr), qs: e(Dr), rs: e(Lr), re: e(Br), os: e(zr), oe: e(Pr), oi: e(Ur), oc: e(Fr), ls: e(Xr), le: e(Gr), tus: e(Yr), tue: e(Wr) }; var a = e(Jr), s = e($r), u = e(Kr), c = e(Vr), f = e(Qr), l = e(Zr); if (l - f > 0 && (r.cs = f, r.ce = l), s - a > 0 && (r.ds = a, r.de = s), (c - u > 0 || c > 0) && (r.es = u, r.ee = c), 0 == r.le) { var d = yt(); r.ue = d - i } oi._le = r.ue || r.le; var h; t.msFirstPaint && (h = t.msFirstPaint, P(function () { ur.fp = "m_" + h }), r.__fp = 3), h && (r.fp = Math.round(h - i), oi.fp = r.fp), t[ti] && (r.sl = e(ti)) } else r = { t: i, os: mt() - i, ls: yt() - i }; return r.je = oi.errs && oi.errs.length || 0, oi.ct && (r.ct = oi.ct - i), oi.touch && (r.fi = oi.touch - i), r } function xt(t, e) { var r = { tr: !1, tt: y(Pn.title), charset: Pn.characterSet }; cr.resources && _(r, cr.resources), P(function () { r.debug = ur }), F(); var i = oi.errs; o(i, function (t, r) { var a = t.toObject(); a.o = a.o - e && e.navigationStart || n, i[r] = a }), r.err = i; var a, s = "getEntriesByType"; return t[s] ? a = t[s]("resource") : Y(b(br, [s])), a && (r.tr = !0, r.res = [], o(a, function (t) { function e(e) { var n = t[e]; return n > 0 ? n : 0 } var n = t.initiatorType, i = t.name, a = { o: e("startTime"), rt: n, n: i, f: e(Jr), ds: e(Jr), de: e($r), cs: e(Qr), ce: e(Zr), sl: e(ti), qs: e(Dr), rs: e(Lr), re: e(Br), ts: t.transferSize || 0, es: t.encodedBodySize || 0 }; if ("xmlhttprequest" === n) { var o = bt(i); o && (a.aid = o.s_id, a.atd = o.t_id, a.an = o.s_name, a.aq = o.s_qu, a.as = o.s_du) } r.res.push(a) })), r } function bt(t) { var e; return o(oi.xhrs, function (n, r) { if (r && t.indexOf(r) > -1) return e = n, !1 }), e } function St(t) { var e = {}; return t && (e.id = t.id, e.a = t.a, e.q = t.q, e.tid = t.tid, e.n = t.n), e } function Et(t) { if (!t.agent) { var n = e._ty_rum; if (n && n.agent) t.agent = n.agent; else { var r = "TINGYUN_DATA", i = N(r); if (i) { try { t.agent = J(decodeURIComponent(i)) } catch (a) { G(a && a.message) } A(r, "", -1e3) } } } return t.agent } function wt(t, e) { var n = 0, r = t.timing; return r ? fr[Hn] && fr[Hn] > 0 ? (n = fr[Hn], e.__fp = 2) : t.getEntriesByName && (n = r.domLoading, o(fr.resources, function (e) { var i = t.getEntriesByName(e); if (1 == i.length) { var a = i[0].responseEnd + r.navigationStart; a > n && (n = a) } }), n -= r.navigationStart, e.__fp = 1) : Y("fp=0"), P(function () { ur._fp = n }), Math.round(n) } function Tt(t, n, r, i) { var a = r || 0; if (Xn.lcp_switch && fr[Dn] && fr[Dn] > 0) return a = fr[Dn], i.__fs = 2, Math.round(a); var s = cr.firstScreenResources; if (s && s.length && t.getEntriesByName) return o(s, function (e) { var n = t.getEntriesByName(e); if (n.length) { var r = n[0], i = r.responseEnd; i > a && (a = i) } }), i.fs_s = 1, Math.round(a); var u = Pn.createElement("img"); if (!u.getBoundingClientRect) return P(function () { ur.fs = a }), a; if (t.getEntriesByName) { var c = e.innerHeight, f = e.innerWidth, l = []; o(Pn.querySelectorAll("img"), function (t) { t.src && qt(t.src) && kt(Ct(t), c, f) && !Ot(t) && l.push(t.src) }); var d = (n.loadEventEnd || oi.loadEventEnd) - n.navigationStart; o(l, function (e) { var n = t.getEntriesByName(e); if (n.length) { var r = n[0], i = r.responseEnd; r.fetchStart <= d && i > a && (a = i) } }) } return i.__fs = 1, Math.round(a) } function kt(t, n, r) { if (t) { var i = e.pageYOffset, a = t.top + (0 === i ? 0 : i || Pn.scrollTop || 0) - (Pn.clientTop || 0); if (a >= n) return !1; var o = t.left; return o >= 0 && o < r } return !1 } function Ct(t) { return He(t.getBoundingClientRect) ? t.getBoundingClientRect() : void 0 } function Ot(t) { return Qn.reliableHiddenOffsets() ? t.offsetWidth <= 0 && t.offsetHeight <= 0 && !t.getClientRects().length : It(t) } function It(t) { for (; t && 1 === t.nodeType;) { if ("none" === Rt(t) || "hidden" === t.type) return !0; t = t.parentNode } return !1 } function Rt(t) { return t.style && t.style.display } function qt(t) { if (!Xn.fs_resources || 0 === Xn.fs_resources.length) return !0; var e = !1; return o(Xn.fs_resources, function (n) { if (t.indexOf(n) > -1) return e = !0, !1 }), e } function Mt(t) { var e = n, r = 0; return t && (e = t.navigationStart || e, r = t[zr] || t.domInteractive || t.domLoading || r), r = r || oi._end, r - e } function Nt(t) { if (t) { var e = t.fetchStart; if (e) return e - t.navigationStart } } function At() { var t = {}, n = 0, r = e.performance; r && r.getEntriesByType && o(r.getEntriesByType("mark") || [], function (e) { if (e && e.name && e.startTime && 0 === e.name.indexOf(gn)) { var r = e.name.substring(gn.length); r && (t[r] = Math.round(e.startTime), n += 1) } }); var i = e[En] && e[En].data, a = _({}, i || {}, pr || {}); return a && r && r.timing && o(a, function (e, i) { je(e) && e.timestamp && (t[i] = e.timestamp - r.timing.navigationStart, n += 1) }), n > 0 ? t : null } function Ht(t, e) { var n = Me(t), r = n ? n.length : 0; if (r > wn && t.res && t.res.length > 0) { t.res = t.res.slice(0, e); var i = Me(t), a = i ? i.length : 0; return a > wn ? Ht(t, e - 10 > 0 ? e - 10 : 0) : t } return t } function jt() { lr.poMetricCollected ? ni() : (lr.pfWaitingPoMetric = !0, setTimeout(ni, Xn.max_metric_wait || Ln)) } function Dt() { function t(t) { try { var e = t.getEntries(); e && o(e, function (t) { t.entryType === Dn ? fr[Dn] = t.renderTime || t.loadTime : t.entryType === Hn && t.name === jn && (fr[Hn] = t.startTime), Lt(r) }) } catch (n) { } } if (!e.PerformanceObserver) return void (lr.poMetricCollected = !0); var n = [Hn]; Xn.lcp_switch && n.push(Dn); var r = [], i = e.PerformanceObserver.supportedEntryTypes || []; if (o(n, function (t) { i.indexOf(t) > -1 && r.push(t) }), P(function () { ur.et = r }), 0 == r.length) return void (lr.poMetricCollected = !0); try { o(r, function (n) { gr[n] = new e.PerformanceObserver(t), gr[n].observe({ type: n, buffered: !0 }) }) } catch (a) { } } function Lt(t) { var e = !0; o(t, function (t) { if (!fr[t]) return e = !1, !1 }), lr.poMetricCollected = e, lr.poMetricCollected && lr.pfWaitingPoMetric && jt() } function Bt() { Dt(), ii.on(tn, C(function () { t(); var e = k(); P(function () { ur.load = e }), oi.loadEventEnd = e })), o([tn, en, nn, rn], function (t) { Ye(e, t, function (e) { P(function () { (ur.e[t] || (ur.e[t] = [])).push(k()) }), ii.emit(t, e) }) }); var t = C(function () { var t = k(); P(function () { ur.end = t }), oi.domContentLoadedEventStart = t, Pn.querySelectorAll && (fr.resources = fr.resources || [], o(Pn.querySelectorAll("head>link,head>script"), function (t) { var e; "LINK" == t.tagName ? e = t.href : "SCRIPT" != t.tagName || t.defer || t.async || (e = t.src), e && fr.resources.push(e) })) }); Ye(Pn, "DOMContentLoaded", t), Ye(Pn, an, function (e) { Pn.readyState === on && t() }); var n = C(function () { oi.touch = k() }); o(["scroll", "click", "keypress"], function (t) { p(Pn, t, n) }) } function zt() { var t = this; t.xhrs = {}, t.errs = [], q.call(t) } function Pt() { if (Xn && Xn.did_cookie) { var t = N(Xn.did_cookie); if (null != t) return t } var e = Zn(un); return e ? e : tr(un, Qe(), fn) } function Ut() { var t = e.localStorage.getItem(cn); return t ? t.split(Cn) : null } function Ft(t) { t && 3 === t.length && e.localStorage.setItem(cn, t.join(Cn)) } function Xt() { var t = Ut(); return Wt(t) && (t = Gt()), t ? t[0] : "" } function Gt() { var t = k(), e = [Qe(), t, t]; return Ft(e), e } function Yt() { var t = k(), e = Ut(); Wt(e) ? (e = Gt(), si.sid = e[0]) : (e[2] = t, Ft(e)) } function Wt(t) { return !t || 3 !== t.length || k() - +t[2] > kn } function Jt(t) { function e(t, e, r) { var i = r || "log", a = n[t] || (n[t] = {}); a[i] = a[i] || "", a[i] += e } var n = {}, r = G(); if (e("Status", r, "ok" !== r), e("Debug", Y()), o(ci, function (t, n) { e("Timeline", n + ": " + t.toString()) }), !t && Nr) console.log("[TingYun Agent Diagnosis]\n"), o(n, function (t, e) { var n = console[e]; o(n, function (t, e) { console[e](t) }) }); else { if (t !== hn) return Me(n); Jn.href = Jn.href + "#" + Me(n) } } function $t(t) { this.limit = t, this.reset() } function Kt(t, e, n, r) { return String(t) + String(e) + String(n) + String(r) } function Vt(t, e, n, r, i, a, o, s, u) { var c = this; c.id = t, c.time = k(), c.msg = e, c.lineno = r, c.colno = i, c.filename = n, c.count = 1, c.stack = a && a.stack || "", c.module = o, c.trigger = s, c.customObj = u, c.fix(); var f = pi[t]; c.ep = f ? 0 : 1, pi[t] = !0 } function Qt(t) { if (lr.pf) { var e = function (t) { var e = []; return o(t, function (t) { e.push(t.toObject()) }), e }(vi.c); if (!e || !e.length) return null; var r = { fu: hi ? hi : hi++, os: parseInt((k() - (fr.pfStart || n)) / 1e3) }; cr.ulabel && (r.ulabel = cr.ulabel), oi.emit("send", "/err1", r, { datas: e }, m(vi.reset, vi)) } } function Zt(t, e, n, r, i, a, s) { if (e || !Yn) { var u = !1; if (o(Fn.domains, function (t) { if (u = t.test(e)) return !1 }), !u) { var c = i && i.moduleId, f = Kt(t, n, r, c), l = vi.get(f); l ? l.increase() : (l = new Vt(f, t, e, n, r, i, c, a, s), vi.add(f, l), oi.errs && oi.errs.push(l)) } } } function te() { var t = e.onerror; e.onerror = function (e, n, r, i, a) { if (Zt(e, n, r, i, a, li), He(t)) return t.apply(this, arguments) }, e.onerror._ty = !0 } function ee() { var t = e.onerror; t && t._ty || te() } function ne(t, e) { if (t) { var n = t.message || "", r = t.stack, i = "", a = 0, s = 0; if (r) { var u = r.split(/\n/); o(u, function (t, e) { if (t && (t = t.trim()), t && 0 === t.indexOf("at ")) { var n = t.indexOf("("), r = t.indexOf(")"); if (n && r) { var o = n + 1; o > r && (o = r); var u = t.substring(o, r); if (u) { var c = u.split(":"); c && c.length > 2 && (i = (c.slice(0, c.length - 2) || []).join(":"), a = +c[c.length - 2], s = +c[c.length - 1]) } } } if (i && De(a) && a > 0 && De(s) && s > 0) return !1 }) } Zt(n, i, a, s, { stack: r }, fi, e) } } function re() { var t = $e(); return t ? te() : Ye(e, Ze, function (t) { var n, r, i, a, o; (t instanceof e.Event || e.ErrorEvent && t instanceof e.ErrorEvent) && (n = t.message || t.error && (t.error.message || t.error.constructor.name) || "", r = t.lineno || 0, i = t.colno || 0, a = t.filename || t.error && t.error.filename || t.target && t.target.baseURI || "", a == Pn.URL && (a = "#"), o = t.error), Zt(n, a, r, i, o, li) }), ii.on([tn, en, nn, rn], function (t) { Qt() }).on(tn, function () { t && w(ee) }), setInterval(Qt, di) } function ie(t) { return function e(n, r) { var i = this, a = e; if (a._ && (a._ = 1), !i[vn]) { var o = i[ln] = {}; o.method = n, o.url = r, o.id = dr.uniqueId++; var s = qr.get("event"); s && (o.key = s.key, s.remain++) } try { return t.apply(i, arguments) } catch (u) { } } } function ae(t) { return function e(n, r) { var i = this, a = e; if (a._ && (a._ = 1), !i[vn]) { var o = i[ln]; o && n && "ty_rum_path" === n && (o.ty_rum_path = r) } try { return t.apply(i, arguments) } catch (s) { } } } function oe(t) { return function e(n) { var r = this, i = e; if (i._ && (i._ = 1), !r[vn]) { var a = r[ln]; a && (a.start = k(), a.reqSize = O(n)), fe(r), r.setRequestHeader && Xn.id && a && gi(a.url) && (a.r = k() % 1e9, r.setRequestHeader("X-Tingyun-Id", Xn.id + ";r=" + a.r)) } try { return t.apply(r, arguments) } catch (o) { } } } function se(t) { o(mi, function (e, n) { var r = "on" + n; t[r] ? z(t, r, function (n) { if (ce(t, e), He(n)) return n.apply(this, arguments) }) : t[r] = function () { ce(t, e) } }) } function ue(t) { o(mi, function (e, n) { Ye(t, n, function () { ce(t, e) }) }) } function ce(t, e) { t && t[ln] && (t[ln].errorCode = e) } function fe(t) { function e(e) { return rt(function n() { var r = n; r._ && (r._ = 1), le(t); var i; if (He(e)) { var a = t[ln]; if (a && 4 == t.readyState) var o = k(); i = e.apply(this, arguments), a && 4 == t.readyState && (a.cbTime = k() - o) } return i }) } var n = t[yi]; if (n) { z(t, yi, e); try { ue(t) } catch (r) { } } else try { Ye(t, an, rt(function i() { var e = i; e._ && (e._ = 1), le(t) })), ue(t) } catch (r) { return void w(function () { se(t), z(t, yi, e) }) } w(function () { z(t, yi, e) }) } function le(t) { var e = t[ln]; if (e && (e.end = k(), e.readyState = t.readyState, 4 == t.readyState)) { e.status = t.status, e.resSize = de(t); var n = qr.get("event"); w(function () { if (!Q(e)) { var r = he(e, t); n && n.key == e.key && (n.xhrs.push(r), 0 === --n.remain && n._end()), oi.xhrs && (wr(e), oi.xhrs[e.url] = r), dr.xhrs.push(r), hr.recording && hr.xhrs.push(r) } }) } } function de(t) { var e = 0; if ("" == t.responseType || "text" == t.responseType) e = O(t.responseText); else if (t.response) e = O(t.response); else try { e = O(t.responseText) } catch (n) { } return e } function he(t, e) { if (t) { var n = t.status, r = { id: t.id, req: t.method + " " + t.url, start: t.start, du: n > 0 ? t.end - t.start : 0, cb: t.cbTime || 0, status: n, err: t.errorCode ? t.errorCode : 0, rec: t.resSize, send: t.reqSize, type: _n }; if (t.ty_rum_path && (r.csheader = t.ty_rum_path), t.r) { var i = K(e, t); i && V(r, i) } return r } } function ve() { var t = Un && Un.prototype; t ? (z(t, "open", ie), z(t, "setRequestHeader", ae), z(t, "send", oe)) : Un && (e.XMLHttpRequest = function () { var t = new Un; return z(t, "open", ie), z(t, "send", oe), z(t, "setRequestHeader", ae), t }) } function pe(t, e) { if (Xn.id && t && gi(t.url)) { t.r = k() % 1e9; var n = Xn.id + ";r=" + t.r; if (e) { var r = e.headers; Be(r) ? (e.headers || (e.headers = new Headers), e.headers.append(mn, n)) : je(r) ? e.headers[mn] = n : r || (e.headers = {}, e.headers[mn] = n) } else e = { headers: {} }, e.headers[mn] = n } return e } function ge(t, e) { if (t) { var n = { id: t.id, req: (t.method || "GET") + " " + t.url, start: t.start, du: t.status > 0 ? t.end - t.start : 0, cb: 0, status: t.status, err: 0, rec: 0, send: 0, type: xn }; if (t.ty_rum_path && (n.csheader = t.ty_rum_path), t.r) { var r = K(e, t, xn); r && V(n, r) } return n } } function me(t) { return function e() { var n = e; n._ && (n._ = 1); var r = this, i = Pe.call(arguments, 0); return new Promise(function (e, n) { var a, o, s = "GET", u = 1; if (i) if (i.length > 1) a = i[0], o = i[1], u = 1, o && je(o) && (s = o.method); else if (1 === i.length) { var c = i[0]; Ne(c) ? a = c : c && (je(c) || ze(c)) && (o = c, u = 0, a = c.url, s = c.method) } var f = { id: dr.uniqueId++, method: s, url: a }, l = pe(f, o); if (l && (i[u] = l, l.headers)) { var d; Be(l.headers) ? d = l.headers.get(Sn) : je(l.headers) && (d = l.headers[Sn]), d && (f[Sn] = d) } var h = qr.get("event"); h && (f.key = h.key, h.remain++), f.start = k(); var v; try { v = t.apply(r, i) } catch (p) { return void n(p) } v.then(rt(function g(t) { var n = g; if (n._ && (n._ = 1), f.end = k(), t) { f.status = t.status; var r = qr.get("event"); w(function () { if (!Q(f)) { var e = ge(f, t); r && r.key == f.key && (r.xhrs.push(e), 0 === --r.remain && r._end()), oi.xhrs && (wr(f), oi.xhrs[f.url] = e), dr.xhrs.push(e), hr.recording && hr.xhrs.push(e) } }) } e(t) }), function (t) { n(t) }) }) } } function ye() { e.fetch && z(e, "fetch", me) } function _e() { return setInterval(function () { if (lr.pf && dr.xhrs && dr.xhrs.length) { var t = []; if (o(dr.xhrs, function (e) { t.push(e) }), t = x(t, function (t) { return (xi.indexOf ? xi.indexOf(t) : S(xi, t)) < 0 }), t && t.length) { xi = t; var e = null; cr.ulabel && (e = { ulabel: cr.ulabel }), oi.emit("send", "/xhr1", e, { xhr: t }, function () { dr.xhrs = x(dr.xhrs, function (e) { return (t.indexOf ? t.indexOf(e) : S(t, e)) < 0 }) }), $e() && !window.XDomainRequest && (dr.xhrs = []) } } }, _i) } function xe(t) { if (t && je(t)) { var e = t.du; e || (e = t.status > 0 && t.end && t.start ? t.end - t.start : 0); var n = { req: t.method + " " + t.url, start: t.start, du: e, cb: t.cb || 0, status: t.status || 0, err: t.err || 0, rec: t.rec || 0, send: t.send || 0, type: bn }; dr.xhrs || (dr.xhrs = []), dr.xhrs.push(n) } } function be() { return Xn.disable_ajax || (ve(), ye()), _e() } function Se() { return Si || {} } function Ee(t, e) { je(e) || (e = {}), t && t.beforeEach && t.afterEach && (t.beforeEach(function (t, e, n) { var r = t.path; Ei[r] && !Ei[r].e || (Ei[r] = gt({ key: r })), n() }), t.afterEach(function (t, n) { var r = t.path; setTimeout(function () { var t = Ei[r]; !t || t.called || t.e || (e && e.status === An ? t.fail() : t.end()) }, e.endDelay || Mn) })) } function we(t, e) { var n; if (je(t)) n = t; else { if (!Ne(t) || void 0 === e) throw new zn(Sr); n = {}, n[t] = e } return o(n, function (t, e) { e in wi ? cr[wi[e]] = t : cr[e] = t }), this } function Te(t) { if (t) { var e = cr.firstScreenResources = cr.firstScreenResources || []; Ae(t) || (t = [t]), o(t, function (t) { if (Ne(t)) e.push(t); else if (ui(t)) { var n = t.src || t.href; n && e.push(n) } }) } } function ke(t) { Ae(t) || (t = [t]), o(t, function (t) { if (t) { if (!(t instanceof RegExp)) throw new zn("parameter's type requires RegExp"); (Fn.domains || (Fn.domains = [])).push(t) } }) } function Ce(t) { vr && (vr.did = t) } function Oe(t, e) { if (t) { var n = t.split("_"), r = n[0], i = n[1]; "ty" === r && i && X(i, { timestamp: k(), data: e }) } } function Ie() { if (Object.defineProperty) { var t = e[ln]; Object.defineProperty(e, ln, { get: function () { return Ci++ > 0 && e.console && console.warn("window.%s is deprecated, use window.%s instead.", ln, dn), t } }) } } function Re() { return oi.start() && (ri(), be(), re()), oi._end = k(), P(function () { ur._end = oi._end }), Ie(), Ti } var qe, Me, Ne = s("String"), Ae = s("Array"), He = s("Function"), je = s("Object"), De = s("Number"), Le = s("Undefined"), Be = s("Headers"), ze = s("Request"), Pe = [].slice, Ue = '"', Fe = /([\"\\])/g, Xe = /\n/g, Ge = e.JSON; Ge && Ge.parse && Ge.stringify ? (qe = r, Me = i) : (qe = u, Me = c); var Ye, We; e.addEventListener ? (Ye = l, We = d) : (Ye = h, We = v); var Je = e.encodeURIComponent, $e = function () { return !document.addEventListener }, Ke = e.location.protocol, Ve = "http:", Qe = function () { function t(t) { return t < 0 ? NaN : t <= 30 ? 0 | Math.random() * (1 << t) : t <= 53 ? (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << t - 30)) * (1 << 30) : NaN } function e(t, e) { for (var n = t.toString(16), r = e - n.length, i = "0"; r > 0; r >>>= 1, i += i)1 & r && (n = i + n); return n } return function () { return e(t(32), 8) + "-" + e(t(16), 4) + "-" + e(16384 | t(12), 4) + "-" + e(32768 | t(14), 4) + "-" + e(t(48), 12) } }(); q.prototype = { on: function (t, e) { var n = this; return Ne(t) ? (n.events[t] || (n.events[t] = [])).push(e) : Ae(t) && o(t, function (t) { n.on(t, e) }), n }, off: function (t, e) { var n = arguments.length, r = this; if (0 === n) return r.events = {}, r; var i = r.events[t]; if (!i) return r; if (1 === n) return r.events[t] = null, r; for (var a, o = i.length; o--;)if (a = i[o], a === e) { i.splice(o, 1); break } return r }, emit: function (t) { var e = [].slice.call(arguments, 1), n = this.events[t]; return n && o(n, function (t) { return t.apply(this, e) }), this }, unshift: function (t, e) { var n = this; return (n.events[t] || (n.events[t] = [])).unshift(e), n } }; var Ze = "error", tn = "load", en = "unload", nn = "beforeunload", rn = "pagehide", an = "readystatechange", on = "complete", sn = "on", un = "TY_DISTINCT_ID", cn = "TY_SESSION_ID", fn = 86400, ln = "_ty_rum", dn = "TINGYUN", hn = 2, vn = "__ign", pn = "__ty_aysncWrap__", gn = "ty_", mn = "X-Tingyun-Id", yn = "X-Tingyun-Tx-Data", _n = "XHR", xn = "FETCH", bn = "CUSTOM_AJAX", Sn = "ty_rum_path", En = "__TINGYUN", wn = 64512, Tn = ["trace", "debug", "info", "warn", "error"], kn = 18e5, Cn = "|", On = "__TY_SPE_STORE", In = 6e4, Rn = "auto", qn = "defined", Mn = 200, Nn = "success", An = "fail", Hn = "paint", jn = "first-paint", Dn = "largest-contentful-paint", Ln = 5e3, Bn = 1e4, zn = e.Error, Pn = e.document, Un = e.XMLHttpRequest, Fn = {}; t(Fn); var Xn = Fn.server || {}, Gn = { fp_threshold: 2e3, fs_threshold: 4e3, dr_threshold: 4e3 }; Xn = _(Gn, Xn, e[En] && e[En].config || {}); var Yn = M("ignore_err"), Wn = M("debug"), Jn = e.location, $n = e.navigator, Kn = e.HTMLElement, Vn = function () { try { var t = Qe(); return e.localStorage.setItem(t, t), e.localStorage.removeItem(t), !0 } catch (n) { return !1 } }(), Qn = {}; Qn.localStorage = Vn, function () { function t() { var t, f, l = Pn.documentElement; l.appendChild(u), c.style.cssText = "-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", n = i = s = !1, r = o = !0, e.getComputedStyle && (f = e.getComputedStyle(c), n = "1%" !== (f || {}).top, s = "2px" === (f || {}).marginLeft, i = "4px" === (f || { width: "4px" }).width, c.style.marginRight = "50%", r = "4px" === (f || { marginRight: "4px" }).marginRight, t = c.appendChild(Pn.createElement("div")), t.style.cssText = c.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", t.style.marginRight = t.style.width = "0", c.style.width = "1px", o = !parseFloat((e.getComputedStyle(t) || {}).marginRight), c.removeChild(t)), c.style.display = "none", a = 0 === c.getClientRects().length, a && (c.style.display = "", c.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", t = c.getElementsByTagName("td"), t[0].style.cssText = "margin:0;border:0;padding:0;display:none", a = 0 === t[0].offsetHeight, a && (t[0].style.display = "", t[1].style.display = "none", a = 0 === t[0].offsetHeight)), l.removeChild(u) } var n, r, i, a, o, s, u = (Pn.documentElement, Pn.createElement("div")), c = Pn.createElement("div"); c.style && (c.style.cssText = "float:left;opacity:.5", Qn.opacity = "0.5" === c.style.opacity, Qn.cssFloat = !!c.style.cssFloat, c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", Qn.clearCloneStyle = "content-box" === c.style.backgroundClip, u = Pn.createElement("div"), u.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", c.innerHTML = "", u.appendChild(c), Qn.boxSizing = "" === c.style.boxSizing || "" === c.style.MozBoxSizing || "" === c.style.WebkitBoxSizing, Qn.reliableHiddenOffsets = function () { return null == n && t(), a }) }(); var Zn, tr; Qn.localStorage ? (Zn = function (t) { return e.localStorage.getItem(t) }, tr = function (t, n) { return e.localStorage.setItem(t, n), n }) : (Zn = N, tr = A); var er, nr = function () { var t = e.navigator.standalone, n = e.navigator.userAgent.toLowerCase(), r = /safari/.test(n), i = /iphone|ipod|ipad/.test(n); return i && !t && !r }, rr = "display:none", ir = "POST", ar = L; e.XDomainRequest ? er = H : $e() ? er = D : $n.sendBeacon ? ar = er = B : er = L; var or = nr(); or && (ar = er = L); var sr = Wn, ur = { start: n, e: {}, an: { count: 0 }, visible: [] }, cr = {}, fr = {}, lr = { pf: !1, poMetricCollected: !1, pfWaitingPoMetric: !1 }, dr = { uniqueId: 0, xhrs: [] }, hr = { recording: !1, xhrs: [] }, vr = {}, pr = {}, gr = {}, mr = {}, yr = e.screen; yr && (mr.sh = yr.height, mr.sw = yr.width); var _r = [], xr = [], br = "{0} not support", Sr = "illegal argument", Er = function (t) { var e = []; return o(t, function (t) { try { e.push(new RegExp(t)) } catch (n) { G(n && n.message) } }), e }(Xn.custom_urls), wr = Er.length ? function (t) { var e = t.url; !oi.ct && e && o(Er, function (n) { if (e.match(n)) return oi.ct = t.end, !1 }) } : T, Tr = 1, kr = 2, Cr = 4, Or = 8, Ir = tt.prototype; Ir.create = Ir.before = Ir.after = Ir.error = null; var Rr; ot.prototype = { createContext: function () { return Object.create ? Object.create(this.active) : at(this.active) }, get: function (t) { if (this.active) return this.active[t] }, set: function (t, e) { if (this.active) return this.active[t] = e }, enter: function (t) { if (!t) throw new zn("context required!"); this._set.push(this.active), this.active = t }, exit: function (t) { if (!t) throw new zn("context required!"); if (t === this.active) return void (this.active = this._set.pop()); var e = this._set.lastIndexOf ? this._set.lastIndexOf(t) : E(this._set, t); if (e < 0) throw new zn("context not currently entered!"); this._set.splice(e, 1) }, bind: function (t, e) { e || (e = this.active ? this.active : this.createContext()); var n = this; return function () { n.enter(e); try { return t.apply(this, arguments) } catch (r) { try { var i = "moduleId"; r[i] = e[i] } catch (a) { } throw r } finally { n.exit(e) } } } }; var qr, Mr = !1, qr = ut(), Nr = "undefined" != typeof e.console, Ar = ct.prototype; Ar.fail = Ar.end = T; var Hr = ft.prototype; Hr.end = Hr.finish = Hr.fail = null, Hr.send = function (t) { this.sent = !0; var e = this.getEventData(t); oi.emit("send", "/spe", null, e, T) }, Hr.getEventData = function (t) { var e = this, n = t.event && t.event.xhrs || []; return o(n, function (t) { t.start = t.start - e.s }), { key: e.key, start: e.s, duration: e.e - e.s, status: e.status, type: e.type, xhrs: n } }, Hr.refreshEventAndStore = function (t) { this.finish(); var n = this.getEventData(t); e.localStorage.setItem(On, Me(n)) }; var jr = {}, Dr = "requestStart", Lr = "responseStart", Br = "responseEnd", zr = "domContentLoadedEventStart", Pr = "domContentLoadedEventEnd", Ur = "domInteractive", Fr = "domComplete", Xr = "loadEventStart", Gr = "loadEventEnd", Yr = "unloadEventStart", Wr = "unloadEventEnd", Jr = "domainLookupStart", $r = "domainLookupEnd", Kr = "redirectStart", Vr = "redirectEnd", Qr = "connectStart", Zr = "connectEnd", ti = "secureConnectionStart", ei = Et(Fn); ei && ei.ulabel && (cr.ulabel = ei.ulabel); var ni = C(function () { function t(t) { return t ? "1" : "0" } var r = e.performance, i = !!r; i || Y(b(br, ["pf"])); var a = St(ei), s = r && r.timing, u = _(_t(s), a, cr), c = _({}, mr); c.ressize = !!s, oi.fp ? (c.fp = oi.fp, i && oi.fp > oi._le && (Y("fp>le"), c.fp = wt(r, c))) : i ? c.fp = wt(r, c) : c.fp = c.__fp = 0, c.dr = Mt(s), i ? c.fs = Tt(r, s, c.fp, c) : c.__fs = 0; var f = "", l = At(), d = _(u, c) || {}; l && o(l, function (t, e) { De(t) && t >= 0 && (d[e] = t) }); var h; if (i) { var v = "trace", p = Math.max(d.ls, 0); p || (p = yt() - s.navigationStart || n), d[v] = p; var g = Nt(s); o(["fp", "fs", "dr", v], function (e) { f += t((g ? d[e] - g : d[e]) >= Xn[e + "_threshold"]) }), delete d[v], f.indexOf("1") > -1 && (h = xt(r, s)), l && (h || (h = {}), h.mark = l) } d.trflag = f || "0000", fr.pfStart = k(), delete d.firstScreenResources, delete d.resources, h && (h = Ht(h, 150)), oi.emit("send", "/pf", d, h, function () { Y("pf sent!"), oi.xhrs = oi.errs = null, lr.pf = !0, Z(), setTimeout(pt, Xn.crosspage_ajax_store_time || Bn) }) }), ri = function () { return ii.on(tn, function () { var t = 0; if (Xn.pfDelay && je(Xn.pfDelay)) { var e = At(); o(Xn.pfDelay, function (n, r) { (!e || null == e[r]) && De(n) && n > t && (t = n) }) } setTimeout(jt, t) }).on([en, nn, rn], jt) }; !function () { if (Wn) { var t, e, n = "visibilitychange"; Le(Pn.hidden) ? Le(Pn.msHidden) ? Le(Pn.webkitHidden) || (t = "webkitHidden", e = "webkit" + n) : (t = "msHidden", e = "ms" + n) : (t = "hidden", e = n), Le(Pn.addEventListener) || Le(Pn[t]) || Ye(Pn, e, U(function () { ur.visible.push([Pn[t], k()]) })) } }(); var ii = new q, ai = zt.prototype; ai.start = function () { if (!Xn.key) return G("missing config, agent disabled!"), !1; var t = e[ln] || e[dn]; return t && t.server ? (G("already loaded!"), !1) : (Bt(), vt(), this) }, _(ai, q.prototype); var oi = new zt; oi.on("send", function (t, e, n, r) { Yt(); var i = R(Xn.beacon, t, _({}, si, e || {}, vr || {})); switch (r = r || T, t) { case "/pf": n ? er(i, n, function () { oi.xhrs = oi.errs = null, r() }) : ar(i, void 0, r); break; default: er(i, n, r) } }); var si = {
          pvid: Qe(), ref: Pn.URL, referrer: Pn.referrer, key: Xn.key, v: "1.8.5", av: "1.8.5", did: Pt(), sid: Xt()
        }, ui = Kn ? function (t) { return t instanceof Kn } : function (t) { t && "object" == typeof t && 1 === t.nodeType && Ne(t.nodeName) }, ci = {}, fi = "api", li = "onerror", di = 1e4, hi = 0; $t.prototype = { add: function (t, e) { this.len > this.limit || this.get(t) || (this.c[t] = e, this.len++) }, get: function (t) { return this.c[t] }, reset: function () { this.c = {}, this.len = 0 } }; var vi = new $t(100), pi = {}; Vt.prototype = { increase: function () { this.count++ }, fix: function () { var t = this, e = t.stack; if (e && Ne(e)) { e = e.split(/\n/); var n = []; o(e, function (t, e) { t.indexOf(pn) == -1 && n.push(t) }), t.stack = n.join("\n") } }, toObject: function () { var t = this; return { o: t.time, e: t.msg, l: t.lineno, c: t.colno, r: t.filename, ec: t.count, s: t.stack, m: t.module, ep: t.ep, tr: t.trigger, co: t.customObj } } }; var gi = function () { function t(t) { var e = t; return n && (r.setAttribute("href", e), e = r.href), r.setAttribute("href", e), { href: r.href, protocol: r.protocol ? r.protocol.replace(/:$/, "") : "", host: r.host, search: r.search ? r.search.replace(/^\?/, "") : "", hash: r.hash ? r.hash.replace(/^#/, "") : "", hostname: r.hostname, port: r.port, pathname: "/" === r.pathname.charAt(0) ? r.pathname : "/" + r.pathname } } function e(t) { var e = !1; return Xn.cors_domains && o(Xn.cors_domains, function (n) { if (t.indexOf(n) > -1) return e = !0, !1 }), e } var n = /(msie|trident)/i.test($n.userAgent), r = Pn.createElement("a"), i = t(Jn.href); return function (n) { var r = t(n); return r.protocol === i.protocol && r.host === i.host || e(r.host) } }(), mi = { error: 990, abort: 905, timeout: 903 }, yi = sn + an, _i = 2e3, xi = [], bi = [], Si = {}; Tn && Tn.length > 0 && (o(Tn, function (t) { Si[t] = function (e, n) { var r = { msg: e || "", time: n && n._time || k(), level: t }; n && (r.options = n), bi.push(r) } }), Si.info && (Si.log = Si.info)); var Ei = {}, wi = { host: "cshst", url: "csurl" }, Ti = { version: "1.8.5", config: we, DIAGNOSE_HREF: hn, diagnose: Jt, createEvent: lt, logFirstScreen: Te, addExcludedDomain: ke, setError: ne, addAjax: xe, setDid: Ce, mark: Oe, endStoreEvent: ht, wrapVueRouter: Ee, packageTime: "20200724", createAutoEvent: gt }, ki = Se(); ki && o(ki, function (t, e) { Ti[e] = t }), e[ln] = e[dn] = Ti; var Ci = 0, Oi = Re(); return Oi
      }(function (ty_rum) { ty_rum.server = { id: 'P6MDM2s9q8o', ignore_err: true, beacon: 'beacon.tingyun.com', beacon_err: 'beacon-err.tingyun.com', key: 'lhSOLV_VovU', trace_threshold: 7000, fp_threshold: 2000, fs_threshold: 4000, dr_threshold: 4000, custom_urls: [], sr: 1.0 }; }, window, +new Date);</script>
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>

  
  <link rel="stylesheet" href="https://unpkg.com/octomments/build/ocs-ui.min.css" />
  <meta name="keywords" content="vue3.0," />
  

  
  <meta name="description" content="虽然 `Vue 3` 还没有正式发布，但是 `Alpha` 版本已经发布了，让我们可以提前学习使用 `Vue 3`。虽然还不能在生产环境中直接使用 `Vue 3` ，但是提前学习总是有好处的，这样当正式版发布时，我们就可以直接上手，或者很方便的将现有的 `Vue 2` 迁移到 `3.0` 最新的版本。" />
  

  
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.0.1" />
  
  <title>vue3.0新特性实战 [ 果糖酱的博客 ]</title>
  
  <!-- stylesheets list from config.yml -->
  
  <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
  
  <link rel="stylesheet" href="/css/xoxo.css">
  
  
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div class="nav-container">
    <nav class="home-menu pure-menu pure-menu-horizontal">
  <a class="pure-menu-heading" href="/">
    <img class="avatar" src="/assets/images/logo.png">
    <span class="title">果糖酱的博客</span>
  </a>

  <ul class="pure-menu-list clearfix">
      
          
            <li class="pure-menu-item"><a href="/" class="pure-menu-link">首页</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/archives" class="pure-menu-link">归档</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/tags" class="pure-menu-link">标签</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/about" class="pure-menu-link">关于</a></li>
          
      
  </ul>
   
</nav>
  </div>

  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <div class="post-container">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        vue3.0新特性实战
      </h1>
      <span>
        
        <time class="time" datetime="2020-05-17T08:36:53.000Z">
        2020-05-17
      </time>
        
      </span>
      <span class="slash">/</span>
      <span class="post-meta">
      <span class="post-tags">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue3-0/" rel="tag">vue3.0</a></li></ul>
      </span>
    </span>
      <span class="slash">/</span>
      <span class="read">
      <span id="busuanzi_value_page_pv"></span> 点击
    </span>
      <span class="slash">/</span>
      <span class="read">阅读耗时 16 分钟</span>
    </header>

    <div class="post-content">
      <p><img src="/assets/images/2020-05/fb35504b584cd26c74590742000a0a45.jpg" alt="poster"></p>
<p><code>Vue 3</code> 还没有正式发布，但是 <code>Alpha</code> 版本已经发布了。</p>
<p>虽然官方还不推荐在生产环境中直接使用 <code>Vue 3</code> ，但是提前学习总归是有好处的。</p>
<blockquote>
<p>嘴上喊着老子学不动了，双手还是很诚实的打开了 <code>Vue 3</code> 文档</p>
</blockquote>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p><code>Vue</code> 官方很贴心的提供了一个 github 仓库，让我们能快速体验<code>Vue 3</code>的新特性:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vuejs/vue-next-webpack-preview.git vue3-start</span><br><span class="line"><span class="built_in">cd</span> vue3-start</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install or yarn intall</span><br></pre></td></tr></table></figure>

<p>开发环境准备就绪后，启动命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>在浏览器中打开 <code>http://127.0.0.1:8080</code> ，您可以看到一个简单的计数器页面：</p>
<p><img src="/assets/images/2020-05/WX20200517-181116@2x.png" alt="langch"></p>
<blockquote>
<p>打开 package.json，当前使用的 vue 版本是：<code>3.0.0-beta.2</code></p>
</blockquote>
<h1 id="Vue-3-新特性"><a href="#Vue-3-新特性" class="headerlink" title="Vue 3 新特性"></a>Vue 3 新特性</h1><p><code>Vue 3</code> 的设计目标是更快，更小，并更好的支持 <code>TypeScript</code> 。</p>
<p>一些新特性包括:</p>
<blockquote>
<p>1、Composition API<br>2、Multiple root elements<br>3、Suspense<br>4、Multiple V-models<br>5、Reactivity<br>6、Teleport<br>7、Transition<br>8、Remove Filter<br>9、App configuration</p>
</blockquote>
<h2 id="1、Composition-API"><a href="#1、Composition-API" class="headerlink" title="1、Composition API"></a>1、Composition API</h2><p>Vue 官方发布了 <code>Composition API</code> 的官方插件，使广大用户可以在 <code>Vue2.x</code> 中享受 <code>Function Base</code> 带来的新体验。</p>
<p>而在 <code>vue 3</code> 中无需单独安装插件，开箱即用。</p>
<p>打开 <code>App.vue</code>，你会看到 <code>setup()</code>方法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img src=<span class="string">"./logo.png"</span>&gt;</span><br><span class="line">  &lt;h1&gt;Hello Vue <span class="number">3</span>!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &lt;button @click=<span class="string">"inc"</span>&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> inc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      inc</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">img &#123;</span></span><br><span class="line"><span class="regexp">  width: 200px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">h1 &#123;</span></span><br><span class="line"><span class="regexp">  font-family: Arial, Helvetica, sans-serif;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>

<p><code>Composition API</code> 主要提供两大好处：</p>
<p>1、清晰的代码结构<br>2、消除重复逻辑</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"counter"</span>&gt;</span><br><span class="line">    &lt;p&gt;count: &#123;&#123; count &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;NewVal (count + 2): &#123;&#123; countDouble &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;button @click=<span class="string">"inc"</span>&gt;Increment&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="dec"&gt;Decrement&lt;/</span>button&gt;</span><br><span class="line">    &lt;p&gt; Message: &#123;&#123; msg &#125;&#125; &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="changeMessage()"&gt;Change Message&lt;/</span>button&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="comment">/* ---------------------------------------------------- */</span></span><br><span class="line">    <span class="keyword">let</span> count = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> countDouble = computed(<span class="function"><span class="params">()</span> =&gt;</span> count.value * <span class="number">2</span>)</span><br><span class="line">    watch(count, newVal =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'count changed'</span>, newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> inc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      count.value += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> dec = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (count.value !== <span class="number">0</span>) &#123;</span><br><span class="line">        count.value -= <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* ---------------------------------------------------- */</span></span><br><span class="line">    <span class="keyword">let</span> msg= ref(<span class="string">'some text'</span>)</span><br><span class="line">    watch(msg, newVal =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'msg changed'</span>, newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> changeMessage = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      msg.value = <span class="string">"new Message"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* ---------------------------------------------------- */</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      inc,</span><br><span class="line">      dec,</span><br><span class="line">      countDouble,</span><br><span class="line">      msg,</span><br><span class="line">      changeMessage</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果你不喜欢使用 <code>Composition API</code>, 也可以继续使用 <code>2.x</code> 的传统方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"counter"</span>&gt;</span><br><span class="line">    &lt;p&gt;count: &#123;&#123; count &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;NewVal (count + 2): &#123;&#123; countDouble &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;button @click=<span class="string">"inc"</span>&gt;Increment&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="dec"&gt;Decrement&lt;/</span>button&gt;</span><br><span class="line">    &lt;p&gt; Message: &#123;&#123; msg &#125;&#125; &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="changeMessage()"&gt;Change Message&lt;/</span>button&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count: <span class="number">0</span>,</span><br><span class="line">      msg: <span class="string">'some message'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    countDouble() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.count*<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    count(newVal) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'count changed'</span>, newVal)</span><br><span class="line">    &#125;,</span><br><span class="line">    msg(newVal) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'msg changed'</span>, newVal)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">     inc() &#123;</span><br><span class="line">      <span class="keyword">this</span>.count += <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    dec() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.count !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.count -= <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    changeMessage() &#123;</span><br><span class="line">      msg = <span class="string">"new Message"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面两段代码在效果上市完全等价的</p>
</blockquote>
<p>使用 <code>Composition API</code> 的好处：可以让我们更好地组织代码(<code>state</code>, <code>methods</code>, <code>computed properties</code>, <code>watcher</code> 等)。</p>
<p>随着组件规模的增长，如何组织我们的业务代码逐渐变成一个重要的问题，确保新进的开发人员都可以轻松地理解代码，而不需要花太多时间。</p>
<p>以前我们会使用 <code>mixin</code> 来复用代码。然而，<code>mixin</code> 最大的痛点是，需要我们跟踪不同组件中的状态和方法，这往往会给开发带来一定的心智负担，一不小心，<code>mixin</code> 可能会覆盖组件中的现有状态或方法。</p>
<p><strong>使用 <code>Composition API</code> 让代码复用更加容易。</strong></p>
<p>我们同样可以抽取出重复功能的代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// message.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = ref(<span class="number">123</span>);</span><br><span class="line">  watch(msg, (newVal) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"msg changed"</span>, newVal);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> changeMessage = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    msg.value = <span class="string">"new Message"</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123; msg, changeMessage &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在其他组件中使用上面组件:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"counter"</span>&gt;</span><br><span class="line">    &lt;p&gt;count: &#123;&#123; count &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;NewVal (count + 2): &#123;&#123; countDouble &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;button @click=<span class="string">"inc"</span>&gt;Increment&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="dec"&gt;Decrement&lt;/</span>button&gt;</span><br><span class="line">    &lt;p&gt;Message: &#123;&#123; msg &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="changeMessage()"&gt;change message&lt;/</span>button&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed, watch &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">'./common/message'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">let</span> count = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> countDouble = computed(<span class="function"><span class="params">()</span> =&gt;</span> count.value * <span class="number">2</span>)</span><br><span class="line">    watch(count, newVal =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'count changed'</span>, newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> inc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      count.value += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> dec = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (count.value !== <span class="number">0</span>) &#123;</span><br><span class="line">        count.value -= <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> &#123; msg, changeMessage &#125; = message()</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      msg,</span><br><span class="line">      changeMessage,</span><br><span class="line">      inc,</span><br><span class="line">      dec,</span><br><span class="line">      countDouble</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2、Multiple-root-elements"><a href="#2、Multiple-root-elements" class="headerlink" title="2、Multiple root elements"></a>2、Multiple root elements</h2><p>在 <code>Vue 2</code> 中，tempalte 只能取一个根元素。即使我们只有两个 &lt;p&gt; 标记，我们也必须将它们包含在一个 &lt;div&gt; 标记中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"counter"</span>&gt;</span><br><span class="line">    &lt;p&gt; Count: &#123;&#123; count &#125;&#125; &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button @click="increment"&gt; Increment &lt;/</span>button&gt;</span><br><span class="line">    &lt;button @click=<span class="string">"decrement"</span>&gt; Decrement&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br></pre></td></tr></table></figure>

<p>为了能编译通过，我们通常会增加一个根节点。</p>
<blockquote>
<p>这个设计确实很糟糕，我曾经无数次吐槽过这个设计。因为会带来不必要的代码嵌套和缩进。</p>
</blockquote>
<p>幸好在 <code>Vue 3</code> 中取消了这一限制：</p>
<p>可以直接在&lt;template&gt;&lt;/template&gt;中使用任意数量的标签:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt; Count: &#123;&#123; count &#125;&#125; &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;button @click="increment"&gt; Increment &lt;/</span>button&gt;</span><br><span class="line">  &lt;button @click=<span class="string">"decrement"</span>&gt; Decrement &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>用 VScode 打开模板时，看到一些 <code>lint</code> 错误，这是因为官方插件 <code>eslint-plugin-vue</code> 还没有支持新的模板语法。</p>
</blockquote>
<h2 id="3、Suspense"><a href="#3、Suspense" class="headerlink" title="3、Suspense"></a>3、Suspense</h2><p><code>Suspense</code> 是一个 <code>Vue 3</code> 新特性。</p>
<p>通常前后端交互是一个异步的过程： 默认我们提供一个加载中的动画，当数据返回时配合使用 <code>v-if</code> 来控制数据显示。</p>
<p><code>Suspense</code> 的出现大大简化了这个过程：它提供了 <code>default</code> 和 <code>fallback</code> 两种状态：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;div v-<span class="keyword">for</span>=<span class="string">"item in articleList"</span> :key=<span class="string">"item.id"</span>&gt;</span><br><span class="line">        &lt;article&gt;</span><br><span class="line">          &lt;h2&gt;&#123;&#123; item.title &#125;&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">          &lt;p&gt;&#123;&#123; item.body &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">        &lt;<span class="regexp">/article&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">    &lt;template #fallback&gt;</span></span><br><span class="line"><span class="regexp">      Articles loading...</span></span><br><span class="line"><span class="regexp">    &lt;/</span>template&gt;</span><br><span class="line">  &lt;<span class="regexp">/Suspense&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> setup() &#123;</span><br><span class="line">    <span class="keyword">let</span> articleList = <span class="keyword">await</span> axios</span><br><span class="line">      .get(<span class="string">'https://jsonplaceholder.typicode.com/posts'</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response)</span><br><span class="line">        <span class="keyword">return</span> response.data</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      articleList</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、Multiple-v-models"><a href="#4、Multiple-v-models" class="headerlink" title="4、Multiple v-models"></a>4、Multiple v-models</h2><p>我们都知道 <code>v-models</code> 用于双向数据绑定。一般用于与表单元素一起使用。有时我们会在自定义组件中使用它。</p>
<p><code>Vue 2</code> 只允许在一个组件上使用一个 <code>v-models</code>。在 <code>Vue 3</code> 中，我们可以将任意数量的 <code>v-model</code> 绑定到我们的定制组件上:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;survey-form v-model:name=<span class="string">"name"</span> v-model:age=<span class="string">"age"</span>&gt;</span><br><span class="line">    &#123;<span class="string">" "</span>&#125;</span><br><span class="line">  &lt;<span class="regexp">/survey-form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

<p>SurveyForm.vue:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;label&gt;Name: <span class="xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">        &lt;input :value=<span class="string">"name"</span> @input=<span class="string">"updateName($event.target.value)"</span> /&gt;</span><br><span class="line">        &lt;label&gt;Age: <span class="xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">        &lt;input :value=<span class="string">"age"</span> @input=<span class="string">"updateAge($event.target.value)"</span> /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">      props: &#123;</span><br><span class="line">        name: <span class="built_in">String</span>,</span><br><span class="line">        age: <span class="built_in">Number</span></span><br><span class="line">      &#125;,</span><br><span class="line">      setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">        <span class="keyword">const</span> updateName = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">          emit(<span class="string">'update:name'</span>, value)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> updateAge = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">          emit(<span class="string">'update:age'</span>, +value)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123; updateName, updateAge &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、Reactivity"><a href="#5、Reactivity" class="headerlink" title="5、Reactivity"></a>5、Reactivity</h2><p><code>Vue 2</code> 的响应式已经非常棒了，但在少数情况下会存在一些问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"hello"</span> @click=<span class="string">"test"</span>&gt;test &#123;&#123;list &#125;&#125; &#123;&#123; myObj &#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">"HelloWorld"</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">      myObj: &#123; <span class="attr">name</span>: <span class="string">"Preetish"</span> &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">      handler: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"watcher triggered"</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      deep: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    test() &#123;</span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">2</span>] = <span class="number">4</span>;</span><br><span class="line">      <span class="keyword">this</span>.myObj.last = <span class="string">"HS"</span>;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.myObj.name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们发现通过<code>this.list</code>下标来修改元素，并不会触发 <code>wacher</code> 监听函数，为了达到目的，我们不得不使用 <code>vue.set()</code> 或 <code>vue.delete()</code> 这些方法。</p>
<p>而在 <code>vue 3</code> 中，我们不需要借助其他 API：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">let</span> list = ref([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">let</span> myObj = ref(&#123; <span class="attr">name</span>: <span class="string">"Preetish"</span> &#125;);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      list.value[<span class="number">3</span>] = <span class="number">3</span>;</span><br><span class="line">      myObj.value.last = <span class="string">"HS"</span>;</span><br><span class="line">      <span class="keyword">delete</span> myObj.value.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; myFun, list, myObj &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="6、Portals"><a href="#6、Portals" class="headerlink" title="6、Portals"></a>6、Portals</h2><p><code>Portals</code> 提供了一种将组件中渲染到页面任意一个 <code>DOM</code> 节点中的能力。在 <code>Vue 2</code> 中，利用一个 <code>portal-vue</code> 的第三方插件来做到这一点。</p>
<p>在 <code>vue 3</code> 中直接使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to=<span class="string">"#modal-layer"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal"</span>&gt;hello&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Teleport&gt;</span><br></pre></td></tr></table></figure>

<p>&lt;Teleport&gt; 是 vue3 中提供特定的标签用于创建一个 <code>Portals</code>。</p>
<p>&lt;Teleport&gt; &lt;/Teleport&gt;中间出现的内容会出现在 <code>to</code> 指定的节点中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"modal-target"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>目前为止，&lt;Teleport&gt;在 Alpha 版本中并不能使用</p>
</blockquote>
<h2 id="7、Transition"><a href="#7、Transition" class="headerlink" title="7、Transition"></a>7、Transition</h2><p>之前我在使用 <code>v-enter-active</code>, <code>v-enter</code>, <code>v-enter-to</code> 这些个状态时搞的晕头转向。</p>
<p>现在 Vue 3 从命名上更直观了: <code>v-enter</code> 变成了 <code>v-enter-from</code>，<code>v-leave</code> 变成 <code>v-leave-from</code>。</p>
<h2 id="8、Remove-Filter"><a href="#8、Remove-Filter" class="headerlink" title="8、Remove Filter"></a>8、Remove Filter</h2><p><code>Vue 3</code> 抛弃了 <code>Filter</code> 的用法，更推荐使用计算属性或方法来实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- vue <span class="number">2.</span>x --&gt;</span><br><span class="line">&#123;&#123; date | format &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue <span class="number">3.0</span> --&gt;</span><br><span class="line">&#123;&#123; format(date) &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、App-configration"><a href="#9、App-configration" class="headerlink" title="9、App configration"></a>9、App configration</h2><p>在 <code>Vue 2</code> 中，如果想使用 <code>use()</code>, <code>mixin()</code> , <code>directive()</code> 等方法需要配合全局 <code>Vue</code> 对象:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./App"</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(<span class="comment">/* ... */</span>);</span><br><span class="line">Vue.mixin(<span class="comment">/* ... */</span>);</span><br><span class="line">Vue.component(<span class="comment">/* ... */</span>);</span><br><span class="line">Vue.directive(<span class="comment">/* ... */</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">"#app"</span>,</span><br><span class="line">  template: <span class="string">"&lt;App/&gt;"</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    App,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在 <code>Vue 3</code> 中， 改成了 <code>createApp</code> 返回的 <code>Vue</code> 实例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./App.vue"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App);</span><br><span class="line"></span><br><span class="line">app.use(<span class="comment">/* ... */</span>);</span><br><span class="line">app.mixin(<span class="comment">/* ... */</span>);</span><br><span class="line">app.component(<span class="comment">/* ... */</span>);</span><br><span class="line">app.directive(<span class="comment">/* ... */</span>);</span><br><span class="line"></span><br><span class="line">app.mount(<span class="string">"#app"</span>);</span><br></pre></td></tr></table></figure>

<h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><p>总之<code>Vue 3</code> 通过提供一种简单的方式来组织和共享代码，并提供强大的 <code>TypeScript</code> 支持，新的代码组织方式会对未来的应用开发产生重大影响。</p>
<p>同时一些其它的特性，如 <code>Suspense</code>，多个 <code>v-models</code> 等也会给开发带来巨大的便利。</p>
<p>同时性能更快，体积更小。它是如何做到的请参考我写的另一篇文章：<a href="/2019/10/28/the-story-of-vue3-0/">Vue.js 作者：关于 Vue3.0 背后的故事</a></p>

    </div>

    <div>全文完。</div>
  </article>
  <div class="toc-container">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建项目"><span class="toc-text">创建项目</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue-3-新特性"><span class="toc-text">Vue 3 新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、Composition-API"><span class="toc-text">1、Composition API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、Multiple-root-elements"><span class="toc-text">2、Multiple root elements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、Suspense"><span class="toc-text">3、Suspense</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、Multiple-v-models"><span class="toc-text">4、Multiple v-models</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、Reactivity"><span class="toc-text">5、Reactivity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、Portals"><span class="toc-text">6、Portals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、Transition"><span class="toc-text">7、Transition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、Remove-Filter"><span class="toc-text">8、Remove Filter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9、App-configration"><span class="toc-text">9、App configration</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#结束语"><span class="toc-text">结束语</span></a>
  </div>


  </div>
</div>
<div class="copyright">
    <span>转载时请注明原文链接。</span>
</div>
<!-- <div class="share" style="width: 100%;">
  <img src="https://kevinofneu-blog-static.oss-cn-beijing.aliyuncs.com/static/2018-12-10-qrcode_for_gh_ffacf5722095_258.jpg" alt="Running Geek" style="margin: auto; display: block;"/>

  <div style="margin: auto; text-align: center; font-size: 0.8em; color: grey;">老铁们关注走一走，不迷路</div>
  
</div>
 -->
  
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>〈 </span>
          <a href="/2020/03/01/quick-sort-algorithm-in-javasript/" rel="next" title="夯实算法-快速排序">
          夯实算法-快速排序
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
          
          <a href="/2020/05/18/guide-performance-optimization-webpack/" rel="prev" title="webpack优化指南">
            webpack优化指南
          </a>
          <span>〉</span>
        
      </div>
    </div>
  

  <script src="https://unpkg.com/octomments/build/ocs.min.js"></script>
  <div id="octomments"></div>
  <script>
  Octomments({
    github: {
      owner: 'answer518',
      repo: 'answer518.github.io',
    },
    issueNumber: 1,
    renderer: [OctommentsRenderer, '#octomments']
  }).init();
  </script>



    </div>

    

  </div>
  <footer class="footer text-center">
    <div id="bottom-inner">
        <a class="bottom-item" href="https://answer518.github.io">首页</a> |
        <a class="bottom-item" href="https://juejin.im/user/5b3a28a1e51d45558a3f7255/posts" target="_blank">掘金专栏</a> |
        <a class="bottom-item" href="https://github.com/answer518" target="_blank">GitHub</a> |
        <a class="bottom-item" href="https://hexo.io" target="_blank">Powered by hexo</a>
        <!-- <a class="bottom-item" href="https://github.com/KevinOfNeu/hexo-theme-xoxo" target="_blank">Theme xoxo</a> -->
    </div>
</footer>
  

<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * 给logo设置点击事件
     * 
     * - 回到顶部
     * - 出现爱心
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }
      
    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      var menu = document.getElementById('menu-main-post');
      if (menu) {
        var toc = document.getElementById('toc');
        if (toc) {
          menu.onclick = function() {
            if (toc) {
              if (toc.style.display == 'block') {
                toc.style.display = 'none';
              } else {
                toc.style.display = 'block';
              }
            }
          };
        } else {
          menu.style.display = 'none';
        }
      }
    }

  })(window, document);
</script>

  



</body>
</html>
