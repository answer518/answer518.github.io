
<!DOCTYPE html>
<html lang="">


<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#202020">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
  
  
    <link rel="stylesheet" href="https://unpkg.com/octomments/build/ocs-ui.min.css">
    <meta name="keywords" content="vue3,function-api,">
  

  
    <meta name="description" content="vue3.0ç‰ˆæœ¬å°†å¾ˆå¿«å‘å¸ƒï¼ˆå¦‚æœæ‚¨æ—¥åé˜…è¯»æ­¤æ–‡ç« ï¼Œå¸Œæœ›å®ƒä»ç„¶æœ‰æ„ä¹‰ğŸ˜‰ï¼‰ã€‚ ç›®å‰ï¼Œè¯¥æ–°ç‰ˆæœ¬æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼Œä½†æ˜¯æ‰€æœ‰å¯èƒ½çš„åŠŸèƒ½éƒ½å¯ä»¥åœ¨å•ç‹¬çš„RFCä¸­æ‰¾åˆ°ï¼šhttps://github.com/vuejs/rfcsã€‚ å…¶ä¸­ï¼Œfunction-apiï¼Œå¯ä»¥æå¤§åœ°æ”¹å˜å¼€å‘Vueåº”ç”¨ç¨‹åºçš„é£æ ¼">
  
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.0.1">
  
  <title>é¢å‘æœªæ¥ç¼–ç¨‹ - vue-function-api [ æœç³–é…±çš„åšå®¢ ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
    
      <link rel="stylesheet" href="/css/xoxo.css">
    
  
</head>


<body>
  <div class="nav-container">
    <nav class="home-menu pure-menu pure-menu-horizontal">
  <a class="pure-menu-heading" href="/">
    <img class="avatar" src="/assets/images/logo.png">
    <span class="title">æœç³–é…±çš„åšå®¢</span>
  </a>

  <ul class="pure-menu-list clearfix">
      
          
            <li class="pure-menu-item"><a href="/" class="pure-menu-link">é¦–é¡µ</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/archives" class="pure-menu-link">å½’æ¡£</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/tags" class="pure-menu-link">æ ‡ç­¾</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/about" class="pure-menu-link">å…³äº</a></li>
          
      
  </ul>
   
</nav>
  </div>

  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <div class="post-container">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        é¢å‘æœªæ¥ç¼–ç¨‹ - vue-function-api
      </h1>
      <span>
        
        <time class="time" datetime="2020-01-01T07:14:18.000Z">
        2020-01-01
      </time>
        
      </span>
      <span class="slash">/</span>
      <span class="post-meta">
      <span class="post-tags">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/function-api/">function-api</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue3/">vue3</a></li></ul>
      </span>
    </span>
      <span class="slash">/</span>
      <span class="read">
      <span id="busuanzi_value_page_pv"></span> ç‚¹å‡»
    </span>
      <span class="slash">/</span>
      <span class="read">é˜…è¯»è€—æ—¶ 15 åˆ†é’Ÿ</span>
    </header>

    <div class="post-content">
      <p><img src="/assets/images/2020-01/1_WSN4Dx07bs92MlVV3tTaSw.png" alt="vue-js-3-future-oriented-programming"></p>
<h1 id="ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"><a href="#ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"></a>ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</h1><p>å‡è®¾äº§å“ç»™æˆ‘ä»¬æå‡ºä¸€ä¸ªéœ€æ±‚ï¼Œè¯»å–ç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨ï¼Œå¹¶æ ¹æ®æ»šåŠ¨è·ç¦»æ¥æ˜¾ç¤ºæˆ–éšè—é¡¶éƒ¨å¯¼èˆªæ¡ã€‚<br>æœ€ç»ˆçš„å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/assets/images/2020-01/demo.gif" alt="demo"></p>
<p>å¦‚æœä½ æ˜¯ä¸€ä¸ªæœ‰ç»éªŒçš„å¼€å‘å·¥ç¨‹å¸ˆï¼Œä½ å¾ˆå®¹æ˜“ä¼šæƒ³åˆ°æå–ä¸€äº›å…¬å…±é€»è¾‘æ–¹ä¾¿å¤šä¸ªç»„ä»¶é—´å¤ç”¨ã€‚</p>
<p>åœ¨Vue2.x APIä¸­ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li>1ã€Mixins</li>
<li>2ã€Higher-order components(é«˜é˜¶ç»„ä»¶)</li>
</ul>
<p>æœ¬æ–‡æˆ‘ä»¬åˆ©ç”¨<code>mixin</code>å®ç°æ»šåŠ¨é€»è¾‘ï¼Œé«˜é˜¶ç»„ä»¶å®ç°æ•°æ®é€»è¾‘ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<h3 id="Scroll-mixin"><a href="#Scroll-mixin" class="headerlink" title="Scroll mixin:"></a>Scroll mixin:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollMixin = &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            pageOffset: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        update() &#123;</span><br><span class="line">            <span class="keyword">this</span>.pageOffset = <span class="built_in">window</span>.pageYOffset</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åˆ©ç”¨<code>scroll</code>äº‹ä»¶ç›‘å¬å™¨ï¼Œç›‘å¬æ»šåŠ¨è·ç¦»ï¼Œå¹¶å­˜æ”¾åœ¨<code>pageOffset</code>å±æ€§ä¸­ã€‚</p>
<h3 id="é«˜é˜¶ç»„ä»¶ï¼š"><a href="#é«˜é˜¶ç»„ä»¶ï¼š" class="headerlink" title="é«˜é˜¶ç»„ä»¶ï¼š"></a>é«˜é˜¶ç»„ä»¶ï¼š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fecthUserInfo, fetchUserPosts &#125; <span class="keyword">from</span> <span class="string">'@/api'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrappedPostsHOC = <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> (&#123;</span><br><span class="line">    props: WrappedComponent.props,</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            postsIsLoading: <span class="literal">false</span>,</span><br><span class="line">            fetchedPosts: [],</span><br><span class="line">            fetchedProfile: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        id: &#123;</span><br><span class="line">            handler: <span class="string">'fetchData'</span>,</span><br><span class="line">            immediate: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="keyword">async</span> fetchData() &#123;</span><br><span class="line">            <span class="keyword">this</span>.postsIsLoading = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">this</span>.fetchedPosts = <span class="keyword">await</span> fetchUserPosts(<span class="keyword">this</span>.id)</span><br><span class="line">            <span class="keyword">this</span>.fetchedProfile = <span class="keyword">await</span> fecthUserInfo(<span class="keyword">this</span>.id)</span><br><span class="line">            <span class="keyword">this</span>.postsIsLoading = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">        postsCount() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.fetchedPosts.length</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h) &#123;</span><br><span class="line">        <span class="keyword">return</span> h(WrappedComponent, &#123;</span><br><span class="line">            props: &#123;</span><br><span class="line">                ...this.$props,</span><br><span class="line">                isLoading: <span class="keyword">this</span>.postsIsLoading,</span><br><span class="line">                profile: <span class="keyword">this</span>.fetchedProfile,</span><br><span class="line">                posts: <span class="keyword">this</span>.fetchedPosts,</span><br><span class="line">                count: <span class="keyword">this</span>.postsCount</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> wrappedPostsHOC</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œ<code>isLoading</code>ï¼Œ<code>posts</code>å±æ€§åˆå§‹åŒ–åˆ†åˆ«ä¸ºåŠ è½½çŠ¶æ€å’Œæ–‡ç« åˆ—è¡¨ã€‚<code>fetchData</code>æ–¹æ³•å°†åœ¨ç»„ä»¶å®ä¾‹åŒ–å’Œæ¯æ¬¡<code>props.id</code>å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ã€‚</p>
<p>è€Œæˆ‘ä»¬æœ€ç»ˆçš„<code>ArticlePage</code>ç»„ä»¶æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'ArticlePage'</span>,</span><br><span class="line">    mixins: [scrollMixin],</span><br><span class="line">    props: &#123;</span><br><span class="line">        id: <span class="built_in">Number</span>,</span><br><span class="line">        isLoading: <span class="built_in">Boolean</span>,</span><br><span class="line">        profile: <span class="built_in">Object</span>,</span><br><span class="line">        posts: <span class="built_in">Array</span>,</span><br><span class="line">        count: <span class="built_in">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨é«˜é˜¶ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ArticlePage = wrappedPostsHOC(ArticlePage)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®Œæ•´çš„ä»£ç çœ‹è¿™é‡Œ<a href="https://github.com/answer518/vue-function-api-begin" target="_blank" rel="noopener">Github</a></p>
</blockquote>
<p>è‡³æ­¤æˆ‘ä»¬å·²ç»å®ç°äº†äº§å“çš„éœ€æ±‚ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªè¿½æ±‚å“è¶Šçš„å·¥ç¨‹å¸ˆï¼Œä½ ä¼šæ…¢æ…¢çš„å‘ç°ï¼Œè¿™ç§æ–¹æ¡ˆå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š</p>
<h2 id="1ã€å‘½åå†²çª"><a href="#1ã€å‘½åå†²çª" class="headerlink" title="1ã€å‘½åå†²çª"></a>1ã€å‘½åå†²çª</h2><p>å¦‚æœæˆ‘ä»¬æƒ³æ–°å¢ä¸€ä¸ª<code>update</code>æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'PostsPage'</span>,</span><br><span class="line">  mixins: [scrollMixin],</span><br><span class="line">  props: &#123;</span><br><span class="line">    id: <span class="built_in">Number</span>,</span><br><span class="line">    isLoading: <span class="built_in">Boolean</span>,</span><br><span class="line">    posts: <span class="built_in">Array</span>,</span><br><span class="line">    count: <span class="built_in">Number</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'some update logic here'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p>å½“ä½ å†æ¬¡æ‰“å¼€é¡µé¢å¹¶æ»šåŠ¨æ—¶ï¼Œé¡¶éƒ¨æ å°†ä¸å†æ˜¾ç¤ºã€‚è¿™æ˜¯å› ä¸ºè¦†ç›–äº†mixinçš„<code>update</code>æ–¹æ³•ã€‚<br>åŒæ ·çš„ï¼Œå¦‚æœä½ åœ¨HOCç»„ä»¶ä¸­å°†<code>fetchedPosts</code>æ”¹ä¸º<code>posts</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> withPostsHOC = <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> (&#123;</span><br><span class="line">    props: WrappedComponent.props, <span class="comment">// ['posts', ...]</span></span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            postsIsLoading: <span class="literal">false</span>,</span><br><span class="line">            posts: [] <span class="comment">// fetchedPosts -&gt; posts</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<p>ç¨‹åºä¼šæŠ¥é”™ï¼š</p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶ä¸­å·²ç»å­˜åœ¨äº†ç›¸åŒçš„å±æ€§ï¼š<code>posts</code></p>
<h2 id="2ã€ä»£ç ä¸æ¸…æ™°"><a href="#2ã€ä»£ç ä¸æ¸…æ™°" class="headerlink" title="2ã€ä»£ç ä¸æ¸…æ™°"></a>2ã€ä»£ç ä¸æ¸…æ™°</h2><p>å½“è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä½ å†³å®šä½¿ç”¨å¦ä¸€ä¸ªmixinä¼šæ€æ ·ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'PostsPage'</span>,</span><br><span class="line">    mixins: [scrollMixin, mouseMixin],</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ç°åœ¨è¿˜èƒ½å‡†ç¡®åœ°è¯´å‡ºä»å“ªä¸ªmixinæ³¨å…¥äº†<code>pageOffset</code>å±æ€§å—? æˆ–è€…å¦ä¸€ç§æƒ…å†µï¼Œè¿™ä¸¤ä¸ªmixinéƒ½å¯ä»¥æœ‰ï¼Œä¾‹å¦‚ï¼Œ<code>yOffset</code>å±æ€§ï¼Œå› æ­¤æœ€åä¸€ä¸ªmixinå°†è¦†ç›–å‰ä¸€ä¸ªmixinçš„å±æ€§ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªå¥½äº‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„bugã€‚ ğŸ˜•</p>
<h2 id="3ã€æ€§èƒ½"><a href="#3ã€æ€§èƒ½" class="headerlink" title="3ã€æ€§èƒ½"></a>3ã€æ€§èƒ½</h2><p>HOCçš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œéœ€è¦æˆ‘ä»¬åˆ›å»ºå•ç‹¬çš„ç»„ä»¶å®ä¾‹æ¥å®ç°é€»è¾‘å¤ç”¨ï¼Œè€Œè¿™å¾€å¾€æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ã€‚</p>
<h1 id="å¦‚ä½•è§£å†³å‘¢"><a href="#å¦‚ä½•è§£å†³å‘¢" class="headerlink" title="å¦‚ä½•è§£å†³å‘¢"></a>å¦‚ä½•è§£å†³å‘¢</h1><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹Vue3ä¼šæä¾›ä»€ä¹ˆæ›¿ä»£æ–¹æ¡ˆï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ <code>function-based API</code>æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>å› ä¸ºVue 3è¿˜æ²¡æœ‰å‘å¸ƒï¼Œæ‰€ä»¥å¸®åŠ©æ’ä»¶æ˜¯ç”±<a href="https://github.com/answer518/vue-function-api-begin" target="_blank" rel="noopener">vue-function-api</a>åˆ›å»ºçš„ã€‚å®ƒæä¾›äº†æ¥è‡ªVue3.xåˆ°Vue2.xçš„apiï¼Œç”¨äºå¼€å‘ä¸‹ä¸€ä»£Vueåº”ç”¨ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œä½ éœ€è¦å®‰è£…å®ƒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-function-api</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>Vue.use()</code>æ¥å®‰è£…å®ƒ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; plugin &#125; <span class="keyword">from</span> <span class="string">'vue-function-api'</span></span><br><span class="line"></span><br><span class="line">Vue.use(plugin)</span><br></pre></td></tr></table></figure>

<p><code>function-based API</code>æä¾›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹â€”â€”<code>setup()</code>ã€‚ æˆ‘ä»¬é€šè¿‡å®ƒæ¥å¤ç”¨ç»„ä»¶é€»è¾‘ã€‚<br>è®©æˆ‘ä»¬å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œæ˜¾ç¤ºtopbarå–å†³äºæ»šåŠ¨åç§»ã€‚åŸºæœ¬ç»„ä»¶çš„ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    <span class="keyword">const</span> pageOffset = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageOffset</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œ<code>setup</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯propså¯¹è±¡ï¼Œè€Œè¿™ä¸ªpropsæ˜¯å“åº”å¼å¯¹è±¡ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«è¦æš´éœ²ç»™æ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡çš„<code>pageOffset</code>å±æ€§ã€‚</p>
<blockquote>
<p><code>pageOffset</code>æ˜¯å“åº”å¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¾€å¸¸ä¸€æ ·åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®ƒ</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"topbar"</span> <span class="attr">:class</span>=<span class="string">"&#123; open: pageOffset &gt; 120 &#125;"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™ä¸ªå±æ€§åº”è¯¥åœ¨æ¯ä¸ªæ»šåŠ¨äº‹ä»¶ä¸­å‘ç”Ÿå˜åŒ–ï¼Œä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶å°†è¢«æŒ‚è½½å¹¶åœ¨ç»„ä»¶å¸è½½æ—¶åˆ é™¤ä¾¦å¬å™¨æ—¶æ·»åŠ æ»šåŠ¨äº‹ä»¶ä¾¦å¬å™¨ã€‚åœ¨APIä¸­å­˜åœ¨è¿™äº›æ–¹æ³•ï¼š<code>value</code>, <code>onMounted</code>, <code>onUnmounted</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; value, onMounted, onUnmounted &#125; <span class="keyword">from</span> <span class="string">'vue-function-api'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    <span class="keyword">const</span> pageOffset = value(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        pageOffset.value = <span class="built_in">window</span>.pageYOffset</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    onUnmounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageOffset</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œæ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­éƒ½åœ¨vue2.xç‰ˆæœ¬æœ‰ä¸€ä¸ªç­‰æ•ˆçš„<code>onXXX</code>å‡½æ•°ï¼Œå¯ä»¥åœ¨<code>setup()</code>ä½¿ç”¨è¿™äº›æ–¹æ³•.</p>
<p>æ‚¨å¯èƒ½è¿˜æ³¨æ„åˆ°<code>pageOffset</code>å˜é‡åŒ…å«ä¸€ä¸ªå“åº”å±æ€§:.valueã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™ä¸ªåŒ…è£…å±æ€§ï¼Œå› ä¸ºJavaScriptä¸­çš„åŸå§‹å€¼(å¦‚æ•°å­—å’Œå­—ç¬¦ä¸²)ä¸æ˜¯é€šè¿‡å¼•ç”¨ä¼ é€’çš„ã€‚å€¼åŒ…è£…å™¨æä¾›äº†ä¸€ç§ä¸ºä»»æ„å€¼ç±»å‹ä¼ é€’å¯å˜å’Œå“åº”å¼å¼•ç”¨çš„æ–¹æ³•ã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯å®ç°ç”¨æˆ·çš„æ•°æ®æŠ“å–é€»è¾‘ã€‚ä»¥åŠåœ¨ä½¿ç”¨åŸºäºé€‰é¡¹çš„APIæ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºå‡½æ•°çš„APIå£°æ˜è®¡ç®—å€¼å’Œè§‚å¯Ÿè€…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    watch,</span><br><span class="line">    computed,</span><br><span class="line">    onMounted,</span><br><span class="line">    onUnmounted</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'vue-function-api'</span></span><br><span class="line"><span class="keyword">import</span> &#123; fetchUserPosts &#125; <span class="keyword">from</span> <span class="string">'@/api'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    <span class="keyword">const</span> pageOffset = value(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> isLoading = value(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> posts = value([])</span><br><span class="line">    <span class="keyword">const</span> profile = value(&#123;&#125;)</span><br><span class="line">    <span class="keyword">const</span> count = computed(<span class="function"><span class="params">()</span> =&gt;</span> posts.value.length)</span><br><span class="line">    <span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      pageOffset.value = <span class="built_in">window</span>.pageYOffset</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    onUnmounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    </span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; props.id,</span><br><span class="line">      <span class="keyword">async</span> id =&gt; &#123;</span><br><span class="line">        isLoading.value = <span class="literal">true</span></span><br><span class="line">        posts.value = <span class="keyword">await</span> fetchUserPosts(id)</span><br><span class="line">        profile.value = <span class="keyword">await</span> fecthUserInfo(id)</span><br><span class="line">        isLoading.value = <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      isLoading,</span><br><span class="line">      pageOffset,</span><br><span class="line">      profile,</span><br><span class="line">      posts,</span><br><span class="line">      count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p><code>computed</code>çš„è¡Œä¸ºå°±åƒvue2.x <code>computed</code>ä¸€æ ·ï¼šè·Ÿè¸ªå…¶ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”ä»…åœ¨ä¾èµ–å…³ç³»å‘ç”Ÿæ›´æ”¹æ—¶æ‰é‡æ–°è®¡ç®—ã€‚ ä¼ é€’ç»™<code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ç§°ä¸ºâ€œsourceâ€ï¼Œå®ƒå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p>
<ul>
<li><p>1ã€ä¸€ä¸ªgetterå‡½æ•°</p>
</li>
<li><p>2ã€ä¸€ä¸ªvalueåŒ…è£…ç±»</p>
</li>
<li><p>3ã€åŒ…å«ä¸Šè¿°ä¸¤ç§ç±»å‹çš„æ•°ç»„</p>
</li>
</ul>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåªæœ‰åœ¨ä»getteræˆ–valueåŒ…è£…ç±»è¿”å›çš„å€¼å‘ç”Ÿæ›´æ”¹æ—¶æ‰ä¼šè°ƒç”¨å®ƒã€‚</p>
<p>æˆ‘ä»¬åªæ˜¯ä½¿ç”¨åŸºäºåŠŸèƒ½çš„APIå®ç°äº†ç›®æ ‡ç»„ä»¶ã€‚ğŸ‰ ä¸‹ä¸€æ­¥ç›®æ ‡å°±æ˜¯å®ç°ç»„ä»¶é€»è¾‘çš„å¤ç”¨ã€‚</p>
<h1 id="ç»„ä»¶é€»è¾‘çš„å¤ç”¨"><a href="#ç»„ä»¶é€»è¾‘çš„å¤ç”¨" class="headerlink" title="ç»„ä»¶é€»è¾‘çš„å¤ç”¨"></a>ç»„ä»¶é€»è¾‘çš„å¤ç”¨</h1><p>è¿™æ˜¯æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼Œé‡ç”¨ä¸é€»è¾‘ç›¸å…³çš„ä»£ç ï¼Œæˆ‘ä»¬åªéœ€å°†å…¶æå–åˆ°æ‰€è°“çš„ç»„åˆå‡½æ•°ä¸­ï¼Œå¹¶è¿”å›å“åº”çŠ¶æ€ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    watch,</span><br><span class="line">    computed,</span><br><span class="line">    onMounted,</span><br><span class="line">    onUnmounted</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'vue-function-api'</span></span><br><span class="line"><span class="keyword">import</span> &#123; fetchUserPosts &#125; <span class="keyword">from</span> <span class="string">'@/api'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> pageOffset = value(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        pageOffset.value = <span class="built_in">window</span>.pageYOffset</span><br><span class="line">    &#125;</span><br><span class="line">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    onUnmounted(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, update))</span><br><span class="line">    <span class="keyword">return</span> &#123; pageOffset &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFetchPosts</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> isLoading = value(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> profile = value(&#123;&#125;)</span><br><span class="line">    <span class="keyword">const</span> posts = value([])</span><br><span class="line">    watch(</span><br><span class="line">        () =&gt; props.id,</span><br><span class="line">        <span class="keyword">async</span> id =&gt; &#123;</span><br><span class="line">            isLoading.value = <span class="literal">true</span></span><br><span class="line">            posts.value = <span class="keyword">await</span> fetchUserPosts(id)</span><br><span class="line">            profile.value = <span class="keyword">await</span> fecthUserInfo(id)</span><br><span class="line">            isLoading.value = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> &#123; isLoading, posts &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">        id: <span class="built_in">Number</span></span><br><span class="line">    &#125;,</span><br><span class="line">    setup(props) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; isLoading, profile, posts &#125; = useFetchPosts(props)</span><br><span class="line">        <span class="keyword">const</span> count = computed(<span class="function"><span class="params">()</span> =&gt;</span> posts.value.length)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...useScroll(),</span><br><span class="line">            isLoading,</span><br><span class="line">            profile,</span><br><span class="line">            posts,</span><br><span class="line">            count</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨<code>useFetchPosts</code>å’Œ<code>useScroll</code>å‡½æ•°æ¥è¿”å›å“åº”å¼å±æ€§ã€‚è¿™äº›å‡½æ•°å¯ä»¥å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨ä»»ä½•å…¶ä»–ç»„ä»¶ä¸­ä½¿ç”¨ã€‚ä¸æ­¤å‰çš„è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼š</p>
<ul>
<li>1ã€ä»ä»»æ„å‘½åçš„ç»„åˆå‡½æ•°è¿”å›å€¼ï¼Œå› æ­¤æ²¡æœ‰åç§°ç©ºé—´å†²çª</li>
<li>2ã€æš´éœ²ç»™æ¨¡æ¿çš„å±æ€§æœ‰æ˜ç¡®çš„æ¥æºï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä»å¤åˆå‡½æ•°è¿”å›çš„å€¼</li>
<li>3ã€æ²¡æœ‰ä¸ºé€»è¾‘é‡ç”¨è€Œåˆ›å»ºçš„ä¸å¿…è¦çš„ç»„ä»¶å®ä¾‹</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å¥½å¤„å¯ä»¥åœ¨<a href="https://github.com/vuejs/rfcs/blob/function-apis/active-rfcs/0000-function-api.md" target="_blank" rel="noopener">å®˜æ–¹RFCé¡µé¢</a>æ‰¾åˆ°ã€‚</p>
<p>æ‰€æœ‰ä»£ç ç¤ºä¾‹å¯ä»¥åœ¨<a href="https://github.com/answer518/vue-function-api-begin" target="_blank" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¦‚æ‚¨æ‰€è§ï¼ŒVueçš„åŸºäºå‡½æ•°çš„APIæå‡ºäº†ä¸€ç§å¹²å‡€çµæ´»çš„æ–¹å¼æ¥åœ¨ç»„ä»¶å†…éƒ¨å’Œç»„ä»¶ä¹‹é—´ç¼–å†™é€»è¾‘ï¼Œè€Œæ²¡æœ‰åŸºäºé…ç½®çš„APIçš„ç¼ºç‚¹ã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œå¯¹äºä»å°å‹åˆ°å¤§å‹ï¼Œå¤æ‚çš„Webåº”ç”¨ç¨‹åºçš„ä»»ä½•ç±»å‹çš„é¡¹ç›®ï¼Œè¿™ä¸ªAPIæ˜¯å¤šä¹ˆä»¤äººæ¿€åŠ¨ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæœ‰ä»»ä½•æƒ³æ³•å’Œä¸åŒæ„è§éƒ½å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµå…±åŒè¿›æ­¥ã€‚ğŸ™‚</p>

    </div>

    <div>å…¨æ–‡å®Œã€‚</div>
  </article>
  <div class="toc-container">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"><span class="toc-text">ç°æœ‰APIæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Scroll-mixin"><span class="toc-text">Scroll mixin:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é«˜é˜¶ç»„ä»¶ï¼š"><span class="toc-text">é«˜é˜¶ç»„ä»¶ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€å‘½åå†²çª"><span class="toc-text">1ã€å‘½åå†²çª</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€ä»£ç ä¸æ¸…æ™°"><span class="toc-text">2ã€ä»£ç ä¸æ¸…æ™°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3ã€æ€§èƒ½"><span class="toc-text">3ã€æ€§èƒ½</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å¦‚ä½•è§£å†³å‘¢"><span class="toc-text">å¦‚ä½•è§£å†³å‘¢</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ç»„ä»¶é€»è¾‘çš„å¤ç”¨"><span class="toc-text">ç»„ä»¶é€»è¾‘çš„å¤ç”¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ€»ç»“"><span class="toc-text">æ€»ç»“</span></a></li></ol>
  </div>


  </div>
</div>
<div class="copyright">
    <span>è½¬è½½æ—¶è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚</span>
</div>
<!-- <div class="share" style="width: 100%;">
  <img src="https://kevinofneu-blog-static.oss-cn-beijing.aliyuncs.com/static/2018-12-10-qrcode_for_gh_ffacf5722095_258.jpg" alt="Running Geek" style="margin: auto; display: block;"/>

  <div style="margin: auto; text-align: center; font-size: 0.8em; color: grey;">è€é“ä»¬å…³æ³¨èµ°ä¸€èµ°ï¼Œä¸è¿·è·¯</div>
  
</div>
 -->
  
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>ã€ˆ </span>
          <a href="/2019/12/23/about-vscode-vue-plugin-config/" rel="next" title="åœ¨Vscodeä¸­é…ç½®Vueç›¸åº”çš„æ’ä»¶">
          åœ¨Vscodeä¸­é…ç½®Vueç›¸åº”çš„æ’ä»¶
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
          
          <a href="/2020/01/11/deep-analysis-of-vue-data-binding/" rel="prev" title="vueå¸¸è§çŸ¥è¯†ç‚¹æ¢³ç†">
            vueå¸¸è§çŸ¥è¯†ç‚¹æ¢³ç†
          </a>
          <span>ã€‰</span>
        
      </div>
    </div>
  

  <script src="https://unpkg.com/octomments/build/ocs.min.js"></script>
  <div id="octomments"></div>
  <script>
  Octomments({
    github: {
      owner: 'answer518',
      repo: 'answer518.github.io',
    },
    issueNumber: 1,
    renderer: [OctommentsRenderer, '#octomments']
  }).init();
  </script>



    </div>

    

  </div>
  <footer class="footer text-center">
    <div id="bottom-inner">
        <a class="bottom-item" href="https://answer518.github.io">é¦–é¡µ</a> |
        <a class="bottom-item" href="https://juejin.im/user/5b3a28a1e51d45558a3f7255/posts" target="_blank">æ˜é‡‘ä¸“æ </a> |
        <a class="bottom-item" href="https://github.com/answer518" target="_blank">GitHub</a> |
        <a class="bottom-item" href="https://hexo.io" target="_blank">Powered by hexo</a>
        <!-- <a class="bottom-item" href="https://github.com/KevinOfNeu/hexo-theme-xoxo" target="_blank">Theme xoxo</a> -->
    </div>
</footer>
  

<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * ç»™logoè®¾ç½®ç‚¹å‡»äº‹ä»¶
     * 
     * - å›åˆ°é¡¶éƒ¨
     * - å‡ºç°çˆ±å¿ƒ
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }
      
    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      var menu = document.getElementById('menu-main-post');
      if (menu) {
        var toc = document.getElementById('toc');
        if (toc) {
          menu.onclick = function() {
            if (toc) {
              if (toc.style.display == 'block') {
                toc.style.display = 'none';
              } else {
                toc.style.display = 'block';
              }
            }
          };
        } else {
          menu.style.display = 'none';
        }
      }
    }

  })(window, document);
</script>

  



</body>
</html>
